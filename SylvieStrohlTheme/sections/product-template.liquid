
<div class="productTemplate">
  {%comment%} Fiche Produit {%endcomment%}
  <div class="ficheProduct">
      {% assign current_variant = product.selected_or_first_available_variant %}
      {% assign featured_image = current_variant.featured_image | default: product.featured_image %}
    
      {%comment%} Zone sur les images {%endcomment%}
      <div class="ficheProduct-SousImg">
        {% for image in product.images %}
          {% capture _ %}{% increment id %}{% endcapture %}
          <img class="SousImg-Img" id="ficheProduct-SousImg-{{ id }}" onclick=changeImageProduct('{{ image.src | img_url: '700x700' }}'); src="{{ image.src | img_url: 'small' }}" alt="{{ image.alt | escape }}">
        {% endfor %}
      </div>
    
      <div class="ficheProduit-BigImg">
        <img id="ficheProduit-BigImg" class="BigImg-Image" src="{{ featured_image.src | img_url: '700x700' }}" alt="{{ product.title }}">
        <button class="BigImg-Zoom"><i class="fas fa-search-plus"></i></button>
      </div>

      {%comment%} Zone sur le contenu de la fiche produit {%endcomment%}
      <div class="ficheProduct-Contenu">
        <div class="ficheProduct-Haut">
          {%comment%} Zone sur le titre et le prix {%endcomment%}
          <h1 class="ficheProduct-Contenu-Title">{{ product.title }}</h1>
          <h2 class="ficheProduct-Contenu-Prix">{{ product.price | money }}</h2>

          {%comment%} Zone des bouttons pour changer d'articles {%endcomment%}
          <div class="ficheProduct-OtherArticle">
            {% assign nextHref = '' %} {% assign backHref = '' %}
            {% for collection in product.collections %}
              {% if collection.next_product.available and nextHref != '' and collection.next_product.id != product.id %}
                {% assign nextHref = collection.next_product.url %}
              {% endif %}
              {% if collection.previous_product.available and backHref != ''  and collection.previous_product.id != product.id %}
                {% assign backHref = collection.previous_product.url %}
              {% endif %}
            {% endfor %}
            {% if nextHref != '' %}
              <a class="aRef" href={{ collection.next_product.url }}>
                <button class="buttonRef">
                  <i class="fas fa-chevron-right"></i>
                </button>
              </a>
            {% endif %}

            {% if backHref != '' %}
              <a class="aRef" href={{ collection.previous_product.url }}>
                <button class="buttonRef">
                  <i class="fas fa-chevron-left"></i>
                </button>
              </a>
            {% endif %}
          </div>
        </div>
        
        {%comment%} Zone sur la description du produit {%endcomment%}
        <div class="ficheProduct-Desc">{{ product.description }}</div>
    
        {%comment%} Zone sur le contenu personnalisé : prix/quantity etc {%endcomment%}
        {% form "product", product %}
          <form action="/cart/add" method="post" enctype="multipart/form-data">
            <select name="id">
              {% for variant in product.variants %}
              {% if variant.available == true %}
              <option value="{{variant.id}}"> {{ variant.title }} for
                {{ variant.price | money_with_currency }}</option>
              {% else %}
              <option disabled="disabled"> {{ variant.title }} - sold out!</option>
              {% endif %}
              {% endfor %}
            </select>
            <button type="submit" name="add" id="add" class="ajouterPanier">
              <i class="fas fa-cart-plus"></i> Ajouter au panier
            </button>
          </form>
        {% endform %}

        {%comment%} Zone des logos, l'admin les rajotue, jusqu'a 8 {%endcomment%}
        <div class="ficheProduct-Logos">
          {% for block in section.blocks %}
            {% if block.type == 'logo' %}
              <div class="logoDiv">
                <a class="aRef" href="{{ block.settings.logoUrl }}">
                  <img alt="{{ block.settings.logoUrl }}" src={{ block.settings.logoImage | img_url: '50x50' }}>
                </a>
            </div>
            {% endif %}
          {% endfor %}
        </div>
    
      </div>
  </div>

  
</div>

{% schema %}
{
  "name": "produit",
  "settings":[
    {
      "type":"checkbox",
      "id":"showButton",
      "label":"Afficher un boutton lien vers une autre page ?",
      "default": false
    },
    {
      "type":"url",
      "id":"urlButton",
      "label":"Lien du boutton"
    },
    {
      "type":"text",
      "id":"textButton",
      "label":"Texte du boutton"
    }
  ],
  "blocks":[
    {
      "type":"logo",
      "name":"logo",
      "limit":8,
      "settings":[
        {
          "type": "image_picker",
          "id": "logoImage",
          "label":"Image du logo"
        },
        {
          "type": "url",
          "id": "logoUrl",
          "label": "Lien de redirection"
        }  
      ]
    },
    {
      "type":"description",
      "name":"description",
      "limit":1,
      "settings":[
        {
          "type": "richtext",
          "id": "paragraphe",
          "label":"La description poussé du produit",
          "default":"<p>Ce produit ne dispose pas encore d'une description</p>"
        }
      ]
    }
  ]
}
{% endschema %}

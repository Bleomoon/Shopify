<div class="productTemplate">
  {%comment%} Fiche Produit {%endcomment%}
  <div class="ficheProduct">
      {% assign current_variant = product.selected_or_first_available_variant %}
      {% assign featured_image = current_variant.featured_image | default: product.featured_image %}
    
      {%comment%} Zone sur les images {%endcomment%}
      <div class="ficheProduct-Img">
        <div alt="{{ product.title }}" id="ficheProduit-BigImg" class="ficheProduit-BigImg">

        </div>
        
        <div class="ficheProduct-SousImg">
          {% assign ficheProductnbImg = 0 %}
          {% for image in product.images %}
            {% capture _ %}{% increment id %}{% endcapture %}
            {% assign mysrc = image.src | img_url: 'compact' %}
            {% assign myId = "ficheProduct-SousImg-{{ id }}" %}
            <img id="ficheProduct-SousImg-{{ id }}" onclick=changeImageProduct(myId,mysrc); src="{{ image.src | img_url: 'compact' }}" alt="{{ image.alt | escape }}">
          {% endfor %}
        </div>
      </div>
    
      {%comment%} Zone sur le contenu de la fiche produit {%endcomment%}
      <div class="ficheProduct-Contenu">
        <div class="ficheProduct-Haut">
          {%comment%} Zone sur le titre {%endcomment%}
          <h1 class="ficheProduct-Contenu-Title">{{ product.title }}</h1>

          {%comment%} Zone des bouttons pour changer d'articles {%endcomment%}
          <div class="ficheProduct-OtherArticle">
            <button class="buttonRef" style="grid-row:1;"><a class="aRef" href={{ collection.next_product.url }}>
                <i class="fas fa-chevron-right"></i>
              </a></button>
          
            <button class="buttonRef" style="grid-row:2;"><a class="aRef" href={{ collection.previous_product.url }}>
                <i class="fas fa-chevron-left"></i>
              </a></button>
          </div>

          <h3 class="ficheProduct-Contenu-Prix">{{ product.price }}</h3>
        </div>
        
        {%comment%} Zone sur la description du produit {%endcomment%}
        <div class="ficheProduct-Desc">{{ product.description }}</div>
    
        {%comment%} Zone sur le contenu personnalisé : prix/quantity etc {%endcomment%}
        {% form "product", product %}
          <form action="/cart/add" method="post" enctype="multipart/form-data">
            <select name="id">
              {% for variant in product.variants %}
              {% if variant.available == true %}
              <option value="{{variant.id}}"> {{ variant.title }} for
                {{ variant.price | money_with_currency }}</option>
              {% else %}
              <option disabled="disabled"> {{ variant.title }} - sold out!</option>
              {% endif %}
              {% endfor %}
            </select>
            <input type="submit" name="add" id="add" value="Add to Cart" class="button">
          </form>
          
        {% endform %}

        {%comment%} Zone des logos, l'admin les rajotue, jusqu'a 8 {%endcomment%}
        <div class="ficheProduct-Logos">
          {% for block in section.blocks %}
            {% if block.type == 'logo' %}
              <div class="logoDiv">
                <a class="aRef" href="{{ block.settings.logoUrl }}">
                  <img alt="{{ block.settings.logoUrl }}" src={{ block.settings.logoImage | img_url: '50x50' }}>
                </a>
            </div>
            {% endif %}
          {% endfor %}
        </div>
    
      </div>
  </div>

  {% comment %} Les informations sur le produit : sa description et ces informations complémentaires qui sont : 
  - Variants, Poids, balises, type, Modèle  {% endcomment %}
  <div class="infosComplementairesProduct">
    <div class="menu-infosComplementairesProduct">
      <div id="menuButton-Description" class="menuButton-Description" onclick=switchMenu(1);>
        Description
      </div>
      <div id="menuButton-Informations" class="menuButton-Informations" onclick=switchMenu(2);>
        Informations complementaires
      </div>
    </div>
    <div class="info-Description">
      <p class="info-Contenu">
        {{ product.description }}
      </p>
    </div>
    <div class="info-Informations">
      <div class="info-Contenu">
        
        {% comment %} l'affichage des variants {% endcomment %}
        {% for product_option in product.options_with_values %}          
            {% assign myvalues = '' %}
            {% for value in product_option.values %}
              {% if myvalues == '' %}
                {% assign myvalues = value %}
              {% else %}
                {% assign myvalues = myvalues | append: ', ' | append: value %}
              {% endif %}
            {% endfor %}
            <div class="une-Info-Contenu">
              <p>{{ product_option.name }}</p>
              <p>{{ myvalues }}</p>
            </div>
        {% endfor %}

        {% comment %} l'affichage des tags {% endcomment %}
        {% assign mytags = '' %}
        {% for tag in product.tags %}
          {% if mytags == '' %}
            {% assign mytags = tag %}
          {% else %}
            {% assign mytags = mytags | append: ', ' | append: tag %}
          {% endif %}
        {% endfor %}
        <div class="une-Info-Contenu">
          <p>Balises :</p> 
          <p>{{ mytags }}</p>
        </div>


        {% comment %} l'affichage du type {% endcomment %}
        <div class="une-Info-Contenu"> 
          <p>Type : </p> 
          <p>{{ product.type }} </p>
        </div>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "produit",
  "blocks":[
    {
      "type":"logo",
      "name":"logo",
      "limit":8,
      "settings":[
        {
          "type": "image_picker",
          "id": "logoImage",
          "label":"Image du logo"
        },
        {
          "type": "url",
          "id": "logoUrl",
          "label": "Lien de redirection"
        }  
      ]
    } 
  ]
}
{% endschema %}

{%comment%} Ici le style css {% endcomment %}
{% style %}
  .productTemplate{
    display: grid;
    width:80%;
    margin-right:10%;
    margin-left:10%;
    margin-top:25px;
    margin-bottom:25px;
  }
  /*CSS de la fiche d'un produit*/
  .ficheProduct {
    grid-column:1;
    grid-row:1;
    display:grid;
  }
  
  .ficheProduct-Img {
    display: grid;
    grid-column: 1;
    grid-row: 1;
  }
  
  .ficheProduit-BigImg {
    grid-column: 2/4;
    background-image:cover;
    background-image: url('{{ featured_image | img_url: 'medium' }}');
  }
  
  .ficheProduct-SousImg {
    grid-column: 1;
    margin-left: 10px;
    margin-right: 10px;
    display: grid;
    background-size:contain;
  }
  
  .ficheProduct-Contenu {
    display: grid;
    grid-column: 2;
    grid-row: 1;
  }
  
  .ficheProduct-Haut{
    display:grid;
  }

  .ficheProduct-Contenu-Title {
    grid-column: 1;
    grid-row: 1;
  }
  
  .ficheProduct-OtherArticle{
    display:grid;
    grid-column: 2;
    grid-row: 1;
  }

  .ficheProduct-Contenu-Prix{
    grid-column: 1;
    grid-row: 2;
  }

  .ficheProduct-Logos {
    display:grid;
    grid-template-columns: repeat(8,1fr);
    grid-template-rows: repeat(1,1fr);
    border:solid;
    border-right:none;
    border-left:none;
  }

  .logoDiv{
    margin-top:5px;
    margin-top:5px;
    margin:auto;
  }

  .infosComplementairesProduct{
    display:grid;
    margin-top:25px;
    margin-bottom:25px;
    grid-column:1;
    grid-row:2;
  }

  .menu-infosComplementairesProduct{
    grid-column:1;
    grid-row:1;
    margin-top:auto;
    margin-bottom:auto;
    margin-right:15px;
    display:grid;
    grid-column:1/2;
    font-size:15px;
    font-family:cursive;
  }

  .menuButton-Description{
    background:none;
    background-color:black;
    color:white;
    margin-bottom:10px;
  }

  .menuButton-Description:hover{
    cursor:pointer;
  }

  .menuButton-Informations{
    background:none;
    color:gray;
    background-color:white; 
  }

  .menuButton-Informations:hover{
    cursor:pointer;
  }

  .info-Description{
    display:none;
    border-left:solid;
    grid-column:2;
    grid-row:1;
    grid-column:3/10;
  }

  .info-Informations{
    display:grid;
    border-left:solid;
    grid-column:2;
    grid-row:1;
    grid-column:3/10;
  }
  
  .info-Contenu{
    margin-left:15px;
    display:grid;
  }

  .une-Info-Contenu{
    grid-template-columns:repeat(2,1fr);
    grid-template-rows:repeat(1,1fr);
    display:grid;
  }
{% endstyle %}

{% comment %} Ici le javascript {% endcomment %}
<script>
  function switchMenu(numero)
  {
    var menuDesc = document.getElementById("menuButton-Description");
    var menuInfo = document.getElementById("menuButton-Informations");
    var infoDesc = document.getElementById("info-Description");
    var infoInfo = document.getElementById("info-Informations");
    
    console.log("numero : " + numero);
    if (numero < 2)
    {
        menuDesc.style.background-color = "gray";
        menuDesc.style.color = "black";
        menuInfo.style.background-color = "black";
        menuInfo.style.color = "white";
        infoDesc.style.display= "none";
        infoInfo.style.display = "grid";
    }
    else
    {
        menuInfo.style.background-color = "gray";
        menuInfo.style.color = "black";
        menuDesc.style.background-color = "black";
        menuDesc.style.color = "white";
        infoDesc.style.display = "grid";
        infoInfo.style.display = "none";
    }
  }

  function changeImageProduct(imgId, src)
  {
    var myImg = document.getElementById(imgId);
    var bigImg = document.getElementById("ficheProduit-BigImg");
    var img = "url(" + src + ")";

    bigImg.style.background-image = img;

  }
</script>